<!-- build time:Sat Jan 11 2025 21:53:13 GMT+0800 (中国标准时间) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="北沐清的博客" href="http://example.com/rss.xml"><link rel="alternate" type="application/atom+xml" title="北沐清的博客" href="http://example.com/atom.xml"><link rel="alternate" type="application/json" title="北沐清的博客" href="http://example.com/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="复习资料"><link rel="canonical" href="http://example.com/2025/01/11/COA14/"><title>计组期末复习第十四讲 指令周期与指令流水线 - 计算机组织结构 - 大二上 - 南京大学软件工程专业课程 | ErinwithBMQ's Blog = 北沐清的博客 = Welcome to my Wonderland</title><meta name="generator" content="Hexo 7.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">计组期末复习第十四讲 指令周期与指令流水线</h1><div class="meta"><span class="item" title="创建时间：2025-01-11 19:36:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2025-01-11T19:36:00+08:00">2025-01-11</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>2.9k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>3 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">ErinwithBMQ's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="/image/COA14/274c366cb6404d1a22a876a8e6ac932a.png"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" itemprop="item" rel="index" title="分类于 南京大学软件工程专业课程"><span itemprop="name">南京大学软件工程专业课程</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" itemprop="item" rel="index" title="分类于 大二上"><span itemprop="name">大二上</span></a><meta itemprop="position" content="2"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/" itemprop="item" rel="index" title="分类于 计算机组织结构"><span itemprop="name">计算机组织结构</span></a><meta itemprop="position" content="3"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://example.com/2025/01/11/COA14/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="北沐清"><meta itemprop="description" content="Welcome to my Wonderland, Per Aspera, Ad Astra."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="北沐清的博客"></span><div class="body md" itemprop="articleBody"><div class="note info"><p>LaTeX 渲染有问题。将就着看吧。</p></div><h2 id="指令周期"><a class="anchor" href="#指令周期">#</a> 指令周期</h2><p>指令周期：处理单个指令的过程（时间）</p><p>取指周期：从内存中提取一条指令</p><p>执行周期：执行所提取的指令</p><p>还可能有中断周期、间址周期</p><h3 id="间址周期"><a class="anchor" href="#间址周期">#</a> 间址周期</h3><p>间址周期：把间接地址的读取看成是一个额外的指令子周期</p><p><img data-src="/image/COA14/274c366cb6404d1a22a876a8e6ac932a.png" alt="274c366cb6404d1a22a876a8e6ac932a.png"></p><h2 id="cpu-的任务与需求"><a class="anchor" href="#cpu-的任务与需求">#</a> CPU 的任务与需求</h2><p><img data-src="/image/COA14/3882187eb23f1c685343376c0070d4fc.png" alt="3882187eb23f1c685343376c0070d4fc.png"></p><p>取指令（从特定地方获取），解释指令（译码），取数据（从特定地方获取），处理数据（如进行算术运算），写数据（写入特定地方）</p><h2 id="数据流"><a class="anchor" href="#数据流">#</a> 数据流</h2><h3 id="取值周期"><a class="anchor" href="#取值周期">#</a> 取值周期</h3><ol><li><p>控制器下达指令：取指周期的开始。</p></li><li><p>通过 MAR 将地址传入地址总线</p><p>控制器通过控制线通知存储器地址就绪</p><p>存储器读取地址</p></li><li><p>存储器通过数据总线将数据发送给 MBR</p><p>如果是异步总线，存储器提供反馈</p></li><li><p>指令取回来后，PC+“1”</p></li></ol><h3 id="间址周期-2"><a class="anchor" href="#间址周期-2">#</a> 间址周期</h3><p>将 MBR 中的<strong>地址引用送入 MAR</strong> 得到地址</p><p>MAR 将地址传入地址总线</p><p>控制器通知<strong>存储器取地址</strong></p><p>存储器通过数据总线将<strong>有效地址发送给 MBR</strong></p><h3 id="中断周期"><a class="anchor" href="#中断周期">#</a> 中断周期</h3><p>处理中断前，将下一条指令放到 MBR 中，再放到数据总线上</p><p>控制器将下一条指令的取值地址通过 MAR 放到地址总线上</p><p>控制器通知存储器获得数据</p><p>存储器从地址线获得地址</p><p>存储器从数据线获得数据，并将数据写入到获得的地址</p><h2 id="指令流水线"><a class="anchor" href="#指令流水线">#</a> 指令流水线</h2><h3 id="两阶段方法"><a class="anchor" href="#两阶段方法">#</a> 两阶段方法</h3><p>将指令处理分成两个阶段：取指令和执行指令</p><h3 id="六阶段方法"><a class="anchor" href="#六阶段方法">#</a> 六阶段方法</h3><p>为了进一步的加速，流水线必须有<strong>更多的阶段</strong></p><p>• <strong>取指令</strong>（Fetch instruction，FI）：读下一条预期的指令到缓冲器</p><p>• <strong>译码指令</strong>（Decode instruction，DI）：确定操作码和操作数指定符</p><p>• <strong>计算操作数</strong>（Calculate operands，CO）：计算每个源操作数的有效地址</p><p>• <strong>取操作数</strong>（Fetch operands，FO）：从存储器取出每个操作数，寄存器 中的操作数不需要取</p><p>• <strong>执行指令</strong>（Execute instruction，EI）：完成指定的操作。若有指定的目 的操作数位置，则将结果写入此位置</p><p>• <strong>写操作数</strong>（Write operand，WO）：将结果存入存储器</p><h3 id="流水线性能"><a class="anchor" href="#流水线性能">#</a> 流水线性能</h3><p><img data-src="/image/COA14/75a8ce7a9da4d09beba328505bcfb97c.png" alt="75a8ce7a9da4d09beba328505bcfb97c.png"></p><p><strong>加速比：</strong></p><p><img data-src="/image/COA14/37ed6e00bc2d027c051bd3f8c389dbf7.png" alt="37ed6e00bc2d027c051bd3f8c389dbf7.png"></p><p k+(n-1)="">S_k = \frac{T_{1,n}}{T_{k,n}} = \frac{nkt}{[k+(n-1)]t}=\frac{nk}</p><h2 id="冒险"><a class="anchor" href="#冒险">#</a> 冒险</h2><h3 id="数据冒险"><a class="anchor" href="#数据冒险">#</a> 数据冒险</h3><p>数据依赖性</p><p>有些数据要等前序计算完成</p><p>解决方案 1：插入<strong> nop 指令</strong>（软件）（不进行任何操作）</p><p>解决方案 2：插入<strong> bubble</strong>（硬件）</p><p>解决方案 3：前递（forwarding）/ <strong>旁路</strong>（bypassing）（快速传递数据）</p><p>解决方案 4：<strong>交换</strong>指令顺序</p><h3 id="控制冒险"><a class="anchor" href="#控制冒险">#</a> 控制冒险</h3><p>指令的执行顺序被更改</p><p>解决方案 1：<strong>提早确定</strong>分支</p><p>解决方案 2：取<strong>多条指令</strong></p><p>解决方案 3：分支<strong>预测</strong></p><p>静态预测（规则不变）</p><p>动态预测（规则变化）</p><p>解决方案 4：<strong>交换</strong>指令顺序</p><h3 id="结构冒险"><a class="anchor" href="#结构冒险">#</a> 结构冒险</h3><p>已进入流水线的不同指令在同一时刻访问相同的硬件资源（内存或寄存器）</p><p>解决：使用多个不同的硬件资源，或者分时使用同一个硬件资源</p><p>解决方案 1：流水线停顿（stall），<strong>插入空泡</strong>（bubble）</p><p>解决方案 2：使用不同用途的<strong>多个存储器</strong></p><p>解决方案 3：同一个存储器提供<strong>分时处理</strong></p><p>下面是 GPT 写的：</p><p>在计算机体系结构中，** 冒险（Hazard）** 是指在指令流水线（Pipeline）中，由于某些原因，指令无法按预期执行，导致执行暂停或结果错误。冒险通常分为三种类型：结构冒险、数据冒险和控制冒险。下面分别介绍这三种冒险：</p><h3 id="1-结构冒险structural-hazard"><a class="anchor" href="#1-结构冒险structural-hazard">#</a> 1. 结构冒险（Structural Hazard）</h3><p><strong>定义</strong>：结构冒险是由于硬件资源冲突导致的流水线停顿，通常发生在多个指令需要同时使用相同硬件资源时，导致资源无法同时满足所有指令的需求。</p><p><strong>原因</strong>：</p><ul><li><p>指令流水线中的不同阶段可能会共享相同的硬件资源，例如 ALU（算术逻辑单元）、寄存器堆、内存总线等。</p></li><li><p>如果两个或多个指令在同一时刻需要访问相同的硬件资源，硬件资源就无法同时满足所有指令的需求，从而引发结构冒险。</p></li></ul><p><strong>例子</strong>：</p><ul><li><p>在一个简单的流水线中，如果同时有两条指令需要访问内存（例如一条加载指令和一条存储指令），而只有一个内存访问单元时，就会发生结构冒险。</p></li><li><p>类似地，如果同一时刻多个指令需要访问 ALU，但 ALU 资源有限，也可能发生结构冒险。</p></li></ul><p><strong>解决方法</strong>：</p><ul><li><p>增加硬件资源（如多路复用器、独立的内存访问端口等）。</p></li><li><p>使用流水线阶段的资源调度技术，确保指令不同时访问相同的资源。</p></li></ul><h3 id="2-数据冒险data-hazard"><a class="anchor" href="#2-数据冒险data-hazard">#</a> 2. 数据冒险（Data Hazard）</h3><p><strong>定义</strong>：数据冒险发生在指令间存在数据依赖时，前序指令的结果尚未计算出来，后续指令需要依赖该结果，从而导致停顿或错误。</p><p><strong>数据冒险类型</strong>：</p><ul><li><p><strong>读后写（RAW，Read After Write）</strong>：也称为真正的数据依赖。后续指令需要读取前序指令计算的结果，但该结果尚未写回寄存器或内存，导致后续指令无法执行。</p><p><strong>例子</strong>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADD R1, R2, R3  // R1 = R2 + R3</span><br><span class="line">SUB R4, R1, R5  // 需要R1的值，但R1尚未计算出来</span><br></pre></td></tr></table></figure><ul><li>在此例中，第二条指令需要依赖第一条指令计算的 R1 的值，但由于第一条指令尚未完成，第二条指令不能立即执行。</li></ul></li><li><p><strong>写后读（WAR，Write After Read）</strong>：后续指令写入寄存器的值会覆盖前序指令的结果，导致数据依赖错误。</p><p><strong>例子</strong>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADD R1, R2, R3  // R1 = R2 + R3</span><br><span class="line">SUB R2, R1, R5  // 需要R1的值，但R2被后续指令修改</span><br></pre></td></tr></table></figure></li><li><p><strong>写后写（WAW，Write After Write）</strong>：前序指令和后续指令都试图向同一寄存器写值，顺序不一致会导致数据错误。</p><p><strong>例子</strong>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ADD R1, R2, R3  // R1 = R2 + R3</span><br><span class="line">SUB R1, R4, R5  // R1被修改</span><br></pre></td></tr></table></figure></li></ul><p><strong>解决方法</strong>：</p><ul><li><p><strong>流水线插入气泡（Pipeline Stalls）</strong>：通过插入 “空指令”（气泡）来等待读取数据，减少数据依赖冲突。</p></li><li><p><strong>数据前推（Data Forwarding/Bypassing）</strong>：将计算结果直接从一个流水线阶段传送到需要的后续阶段，避免等待数据写回寄存器。</p></li><li><p><strong>重排序（Instruction Reordering）</strong>：重新排列指令的顺序，避免数据依赖冲突。</p></li></ul><h3 id="3-控制冒险control-hazard"><a class="anchor" href="#3-控制冒险control-hazard">#</a> 3. 控制冒险（Control Hazard）</h3><p><strong>定义</strong>：控制冒险是由于程序中的控制指令（如跳转、分支等）导致流水线不能确定下一条指令是哪一条，从而发生停顿或错误。</p><p><strong>原因</strong>：</p><ul><li><p>当程序遇到分支指令时，流水线无法提前知道分支的目标地址，因此必须等待分支指令执行完成以确定跳转的目标。</p></li><li><p>这通常发生在条件分支指令（如 <code>if</code> 语句、循环等）和无条件跳转指令（如 <code>goto</code> 、 <code>return</code> 等）之后。</p></li></ul><p><strong>例子</strong>：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BEQ R1, R2, <span class="selector-tag">LABEL</span>  // 如果R1 == R2，跳转到<span class="selector-tag">LABEL</span></span><br><span class="line">ADD R3, R4, R5     // 该指令要等BEQ完成才能执行，因为BEQ决定了跳转</span><br></pre></td></tr></table></figure><ul><li>在此例中， <code>BEQ</code> 指令的执行结果不确定，直到它被完全执行后，流水线才能知道是否跳转以及跳转到哪个地址，从而导致控制冒险。</li></ul><p><strong>解决方法</strong>：</p><ul><li><p><strong>分支预测（Branch Prediction）</strong>：根据历史执行模式预测分支的方向，提前加载指令。如果预测正确，可以减少控制冒险的影响。</p></li><li><p><strong>延迟分支（Delayed Branch）</strong>：在分支指令后插入一条可以执行的指令，即使分支未确定，流水线仍然可以继续执行。</p></li><li><p><strong>动态分支预测（Dynamic Branch Prediction）</strong>：使用硬件动态调整分支预测策略，通过复杂的算法来预测跳转指令的目标。</p></li><li><p><strong>提早确定分支</strong>（？）</p></li></ul><hr><p>总结来说，冒险的出现是因为流水线中的不同阶段存在相互依赖和硬件资源竞争。通过优化硬件和采用各种技术（如数据前推、分支预测等），可以最大限度地减少冒险对流水线性能的影响。</p><div class="tags"><a href="/tags/%E5%A4%8D%E4%B9%A0%E8%B5%84%E6%96%99/" rel="tag"><i class="ic i-tag"></i> 复习资料</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2025-01-11 20:27:52" itemprop="dateModified" datetime="2025-01-11T20:27:52+08:00">2025-01-11</time> </span><span id="2025/01/11/COA14/" class="item leancloud_visitors" data-flag-title="计组期末复习第十四讲 指令周期与指令流水线" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.jpg" alt="北沐清 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.jpg" alt="北沐清 支付宝"><p>支付宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>北沐清 <i class="ic i-at"><em>@</em></i>北沐清的博客</li><li class="link"><strong>本文链接：</strong> <a href="http://example.com/2025/01/11/COA14/" title="计组期末复习第十四讲 指令周期与指令流水线">http://example.com/2025/01/11/COA14/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/2025/01/11/COA13/" itemprop="url" rel="prev" data-background-image="&#x2F;image&#x2F;COA13&#x2F;849b68ccb8402d2588526f25cb5f9d30.png" title="计组期末复习第十三讲 指令系统"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机组织结构</span><h3>计组期末复习第十三讲 指令系统</h3></a></div><div class="item right"><a href="/2025/01/11/COA15/" itemprop="url" rel="next" data-background-image="&#x2F;image&#x2F;COA15&#x2F;b6c20b22a81a5a2cebd5c3a4ead6bb1d.png" title="计组期末复习第十五讲 控制器"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机组织结构</span><h3>计组期末复习第十五讲 控制器</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E5%91%A8%E6%9C%9F"><span class="toc-number">1.</span> <span class="toc-text">指令周期</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%B4%E5%9D%80%E5%91%A8%E6%9C%9F"><span class="toc-number">1.1.</span> <span class="toc-text">间址周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cpu-%E7%9A%84%E4%BB%BB%E5%8A%A1%E4%B8%8E%E9%9C%80%E6%B1%82"><span class="toc-number">2.</span> <span class="toc-text">CPU 的任务与需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%B5%81"><span class="toc-number">3.</span> <span class="toc-text">数据流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E5%80%BC%E5%91%A8%E6%9C%9F"><span class="toc-number">3.1.</span> <span class="toc-text">取值周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%B4%E5%9D%80%E5%91%A8%E6%9C%9F-2"><span class="toc-number">3.2.</span> <span class="toc-text">间址周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E6%96%AD%E5%91%A8%E6%9C%9F"><span class="toc-number">3.3.</span> <span class="toc-text">中断周期</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="toc-number">4.</span> <span class="toc-text">指令流水线</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text">两阶段方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E9%98%B6%E6%AE%B5%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text">六阶段方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%80%A7%E8%83%BD"><span class="toc-number">4.3.</span> <span class="toc-text">流水线性能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%92%E9%99%A9"><span class="toc-number">5.</span> <span class="toc-text">冒险</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%86%92%E9%99%A9"><span class="toc-number">5.1.</span> <span class="toc-text">数据冒险</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A7%E5%88%B6%E5%86%92%E9%99%A9"><span class="toc-number">5.2.</span> <span class="toc-text">控制冒险</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E5%86%92%E9%99%A9"><span class="toc-number">5.3.</span> <span class="toc-text">结构冒险</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BB%93%E6%9E%84%E5%86%92%E9%99%A9structural-hazard"><span class="toc-number">5.4.</span> <span class="toc-text">1. 结构冒险（Structural Hazard）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%86%92%E9%99%A9data-hazard"><span class="toc-number">5.5.</span> <span class="toc-text">2. 数据冒险（Data Hazard）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8E%A7%E5%88%B6%E5%86%92%E9%99%A9control-hazard"><span class="toc-number">5.6.</span> <span class="toc-text">3. 控制冒险（Control Hazard）</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/2025/01/11/COA/" rel="bookmark" title="计组期末复习 1~6讲">计组期末复习 1~6讲</a></li><li><a href="/2025/01/11/COA7/" rel="bookmark" title="计组期末复习第七讲 Cache">计组期末复习第七讲 Cache</a></li><li><a href="/2025/01/11/COA8/" rel="bookmark" title="计组期末复习第八讲 外部存储器">计组期末复习第八讲 外部存储器</a></li><li><a href="/2025/01/11/COA9/" rel="bookmark" title="计组期末复习第九讲 数据校验码">计组期末复习第九讲 数据校验码</a></li><li><a href="/2025/01/11/COA10/" rel="bookmark" title="计组期末复习第十讲 RAID">计组期末复习第十讲 RAID</a></li><li><a href="/2025/01/11/COA11/" rel="bookmark" title="计组期末复习第十一讲 虚拟存储器">计组期末复习第十一讲 虚拟存储器</a></li><li><a href="/2025/01/11/COA12/" rel="bookmark" title="计组期末复习第十二讲 总线">计组期末复习第十二讲 总线</a></li><li><a href="/2025/01/11/COA13/" rel="bookmark" title="计组期末复习第十三讲 指令系统">计组期末复习第十三讲 指令系统</a></li><li class="active"><a href="/2025/01/11/COA14/" rel="bookmark" title="计组期末复习第十四讲 指令周期与指令流水线">计组期末复习第十四讲 指令周期与指令流水线</a></li><li><a href="/2025/01/11/COA15/" rel="bookmark" title="计组期末复习第十五讲 控制器">计组期末复习第十五讲 控制器</a></li><li><a href="/2025/01/11/COA16/" rel="bookmark" title="计组期末复习第十六讲 输入输出">计组期末复习第十六讲 输入输出</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="北沐清" data-src="/images/avatar.jpg"><p class="name" itemprop="name">北沐清</p><div class="description" itemprop="description">Per Aspera, Ad Astra.</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">27</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">6</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">5</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VyaW53aXRoQk1R" title="https:&#x2F;&#x2F;github.com&#x2F;ErinwithBMQ"><i class="ic i-github"></i></span> <a href="/erinwithbmq@gmail.com" title="erinwithbmq@gmail.com" class="item email"><i class="ic i-envelope"></i></a> <span class="exturl item youtube" data-url="aHR0cHM6Ly9zcGFjZS5iaWxpYmlsaS5jb20vMzg3ODczMTM=" title="https:&#x2F;&#x2F;space.bilibili.com&#x2F;38787313"><i class="ic i-youtube"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/2025/01/11/COA13/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/2025/01/11/COA15/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/" title="分类于 计算机组织结构">计算机组织结构</a></div><span><a href="/2025/01/11/COA10/" title="计组期末复习第十讲 RAID">计组期末复习第十讲 RAID</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/" title="分类于 计算机组织结构">计算机组织结构</a></div><span><a href="/2025/01/11/COA15/" title="计组期末复习第十五讲 控制器">计组期末复习第十五讲 控制器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2025/01/11/CN12/" title="计网 名词解释整理">计网 名词解释整理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/" title="分类于 计算机组织结构">计算机组织结构</a></div><span><a href="/2025/01/11/COA8/" title="计组期末复习第八讲 外部存储器">计组期末复习第八讲 外部存储器</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2025/01/11/CN6/" title="计网第六章 会话、表示、应用层">计网第六章 会话、表示、应用层</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/" title="分类于 计算机组织结构">计算机组织结构</a></div><span><a href="/2025/01/11/COA14/" title="计组期末复习第十四讲 指令周期与指令流水线">计组期末复习第十四讲 指令周期与指令流水线</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E7%BB%87%E7%BB%93%E6%9E%84/" title="分类于 计算机组织结构">计算机组织结构</a></div><span><a href="/2025/01/11/COA12/" title="计组期末复习第十二讲 总线">计组期末复习第十二讲 总线</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%87%86%E5%A5%8E/" title="分类于 准奎">准奎</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%87%86%E5%A5%8E/%E5%90%8C%E4%BA%BA%E6%96%87/" title="分类于 同人文">同人文</a></div><span><a href="/2025/01/11/loneliness/" title="孤独疗愈">孤独疗愈</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2025/01/11/CN10/" title="计网第十章 广域网">计网第十章 广域网</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/" title="分类于 南京大学软件工程专业课程">南京大学软件工程专业课程</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/" title="分类于 大二上">大二上</a> <i class="ic i-angle-right"></i> <a href="/categories/%E5%8D%97%E4%BA%AC%E5%A4%A7%E5%AD%A6%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B%E4%B8%93%E4%B8%9A%E8%AF%BE%E7%A8%8B/%E5%A4%A7%E4%BA%8C%E4%B8%8A/%E4%BA%92%E8%81%94%E7%BD%91%E8%AE%A1%E7%AE%97/" title="分类于 互联网计算">互联网计算</a></div><span><a href="/2025/01/11/CN2/" title="计网第二章 物理层">计网第二章 物理层</a></span></li></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2025</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">北沐清 @ ErinwithBMQ's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">111k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:41</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2025/01/11/COA14/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->